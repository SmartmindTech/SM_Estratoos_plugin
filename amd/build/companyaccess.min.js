/**
 * Company access management JavaScript module.
 *
 * Provides search filtering, select all/deselect all functionality,
 * and live counter updates for the company access management page.
 *
 * @module     local_sm_estratoos_plugin/companyaccess
 * @copyright  2025 SmartMind Technologies
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","core/str"],function(e,n){"use strict";var o={},c=function(){var n=e(".company-checkbox:checked").length;e("#selected-count").text(n+" "+o.companiesselected)},t=function(){e(".company-checkbox").each(function(){var n=e(this),c=n.closest(".company-item"),t=c.find(".company-status-badge");n.is(":checked")?0===t.length&&c.find(".custom-control-label").append('<span class="badge badge-success ml-2 company-status-badge">'+o.enabled+"</span>"):t.remove()})};return{init:function(){n.get_strings([{key:"companiesselected",component:"local_sm_estratoos_plugin"},{key:"enabled",component:"local_sm_estratoos_plugin"}]).then(function(e){return o.companiesselected=e[0],o.enabled=e[1],!0}).then(function(){return window.console&&window.console.log&&(window.console.log("SM_ESTRATOOS: companyaccess module initialized"),window.console.log("SM_ESTRATOOS: Found "+e(".company-item").length+" company items")),e(document).on("input keyup","#company-search",function(){!function(n){e(".company-item").each(function(){var o=e(this).attr("data-name");o||(o=""),""===n||-1!==o.indexOf(n)?e(this).show():e(this).hide()})}(e(this).val().toLowerCase().trim())}),e(document).on("click","#select-all-companies",function(n){n.preventDefault(),e(".company-checkbox:visible").prop("checked",!0),c(),t()}),e(document).on("click","#deselect-all-companies",function(n){n.preventDefault(),e(".company-checkbox:visible").prop("checked",!1),c(),t()}),e(document).on("change",".company-checkbox",function(){c(),t()}),c(),!0}).catch(function(e){window.console&&window.console.error&&window.console.error("SM_ESTRATOOS: Error loading strings",e)})}}});